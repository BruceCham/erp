var app = angular.module('h5_angularjs', ['ngRoute']);
app.config(["$routeProvider",function($routeProvider) {
  $routeProvider
    .when('/login',{
        templateUrl: '/static/app/view/login.html',
        controller: 'loginController'
    })
    .when('/reg',{
        templateUrl: '/static/app/view/reg.html',
        controller: 'regController'
    })
    .when('/home',{
        templateUrl: '/static/app/view/home.html'
    })
    .when('/error/:code',{
        templateUrl: '/static/app/view/error.html',
        controller: ["$scope","$routeParams",function($scope,$routeParams){
            $scope.errorCode = $routeParams.code;
        }]
    })
    .otherwise({
      redirectTo: '/login'
    });
  }
]);
app.controller('loginController', ['$scope','$http', function($scope,$http){
    $scope.login = function(flag){
        if( flag ){
            $http({
                url: '/login',
                method: 'post',
                data: {
                    phone: $scope.phone,
                    password: $scope.password
                }
            }).success(function(res){
                console.log(res)
            })
        }
    }
}])
app.controller('regController', ['$scope','$http', function($scope,$http){
    $scope.reg = function(flag){
        if( flag ){
            $http({
                url: '/reg',
                method: 'post',
                data: {
                	name: $scope.name,
                    phone: $scope.phone,
                    password: $scope.password,
                    passwordRepeat: $scope.passwordRepeat
                }
            }).success(function(res){
                console.log(res)
            })
        }
    }
}])